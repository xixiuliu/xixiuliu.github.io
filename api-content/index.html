{"posts":[{"title":"图片","content":" ","link":"https://xixiuliu.github.io/post/tu-pian/"},{"title":"Promise对象","content":"关于promise对象的一些事 一、什么是Promise • Promise 对象代表了未来将要发生的事件，用来传递异步操作的消息。 • Promise 对象代表一个目前还不可用，但是在未来的某个时间点可以被解析的值。 • Promise对象代表了一个异步操作的最终完成或者失败。 总结：以上的几条定义的总结，我们可以看到几个关键字 异步 未来 结果 。 总结来说就是，代表了一个异步操作，未来会返回的结果。 二、为什么要用Promise 在不使用Promise对象的时候，我们的异步回调是以下这种调用方式。 // 回调金字塔 asyncOperation(function(data){ // 处理 data anotherAsync(function(data2){ // 处理 data2 yetAnotherAsync(function(){ // 完成 }); }); }); 在使用了Promise对象之后，我们就可以用以下同步的方式来书写异步的代码，可以使我们的逻辑更加清晰明了。 promiseSomething() .then(function(data){ // 函数promiseSomething的返回结果 // 关于data的逻辑代码 return anotherAsync(); }) .then(function(data2){ // 是函数anotherAsync的返回结果 // 关于data2的逻辑代码 return yetAnotherAsync(); }) .then(function(){ // 函数yetAnotherAsync的返回结果 // 完成 }); //以此类推，还可以有多个异步函数 三、怎么去实现一个Promise 简单解释，其实promise就是三个状态。利用观察者模式的编程思想，只需要通过特定书写方式注册对应状态的事件处理函数，然后更新状态，调用注册过的处理函数即可。 这个特定方式就是then，done，fail，always…等方法，更新状态就是resolve、reject方法。 const PENDING = 'pending'; const FULFILLED = 'fulfilled'; const REJECTED = 'rejected'; function newPromise(fn) { let self = this; self.state = PENDING; function resolve(value) { if (self.state === PENDING) { self.state = FULFILLED; } } function reject(reason) { if (self.state === PENDING) { self.state = REJECTED; } } try { fn(resolve, reject) } catch (reason) { reject(reason) } } newPromise.prototype.then = function(onFuifilled, onRejected) { let self = this; if (self.state === FULFILLED) { onFuifilled(self.value); } if (self.state === REJECTED) { onRejected(self.reason); } }; module.exports = newPromise; 四、其他的选择 async...await 是为了解决什么问题 为了解决回调地狱的问题。在这之前，可以用回调函数或Promise来实现异步加载，但是这两种方式对于单个或几个来说不嫌繁琐。但是如果是多个的话，就很麻烦了。所以出现了async和await 它是什么 是ES6的语法糖（语法糖是指：在计算机语言中添加的某种语法，对语言的功能没有影响，只是为了更方便使用） 怎么用 async定义了一个异步函数，但是在这个函数中的代码是同步还是异步不受限制。也就是说，有async的函数中完全可以不写await 反之，如果函数中有await，那么包含他的函数必须用async声明。 还有一点就是，await后面到底等待的是什么。其实是个Promise对象，如果不是一个Promise对象，也会强制转换成Promise对象返回。 ","link":"https://xixiuliu.github.io/post/ce-shi-ce-shi/"},{"title":"关于","content":" 欢迎来到我的小站呀，很高兴遇见你！🤝 🏠 关于本站 出于很单纯的目的，创建了这个网站。 👨‍💻 博主是谁 一个爱做饭、偶尔感悟的程序媛。 📬 联系我呀 邮箱: 1174341971@qq.com ","link":"https://xixiuliu.github.io/post/about/"}]}